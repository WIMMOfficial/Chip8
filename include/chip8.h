#define STACK_MAX_SIZE 256
#define DISPLAY_ROW 128
#define DISPLAY_COLUMNS 64
#define X opcode & 0x0F00 >> 8
#define Y opcode & 0x00F0 >> 4
#include <SDL.h>
#include <stdbool.h>

typedef unsigned char byte;

typedef union
{
  unsigned short WORD;
  typedef struct
  {
    byte low, high;
    
  }BYTE;
  
}word;


typedef struct
{
  int keycode;
  SDLKey symbol;
  
}key;


typedef struct
{
  
  word V[16]; //General purpose registers  
  word pc, I, sp;    //programm counter, instruction ptr, stack ptr
  byte dt, st;       //delay timer, sound timer
  
}chip8;

word stack[STACK_MAX_SIZE], opcode;
byte memory[4096];
byte display[DISPLAY_ROW][DISPLAY_COLUMNS]; /*screen*/

/*array of sprites*/
unsigned char arr_sprite[80] =
  {
    0xF0, 0x90, 0x90, 0x90, 0xF0, // 0
    0x20, 0x60, 0x20, 0x20, 0x70, // 1
    0xF0, 0x10, 0xF0, 0x80, 0xF0, // 2
    0xF0, 0x10, 0xF0, 0x10, 0xF0, // 3
    0x90, 0x90, 0xF0, 0x10, 0x10, // 4
    0xF0, 0x80, 0xF0, 0x10, 0xF0, // 5
    0xF0, 0x80, 0xF0, 0x90, 0xF0, // 6
    0xF0, 0x90, 0xF0, 0x10, 0xF0, // 7
    0xF0, 0x90, 0xF0, 0x90, 0xF0, // 8
    0xF0, 0x90, 0xF0, 0x10, 0xF0, // 9
    0xF0, 0x90, 0xF0, 0x90, 0x90, // A
    0xE0, 0x90, 0xE0, 0x90, 0xE0, // B
    0xF0, 0x80, 0x80, 0x80, 0xF0, // C
    0xE0, 0x90, 0x90, 0x90, 0xE0, // D
    0xF0, 0x80, 0xF0, 0x80, 0xF0, // E
    0xF0, 0x80, 0xF0, 0x80, 0x80, // F 
  }


void initialize(chip8*); // initialize the cpu
void cycle(chip8*);
void draw(byte, byte, byte, chip8*);
void display_flush();
void stack_push(chip8*, word);
word stack_pop(chip8*);


